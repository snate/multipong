\section{Multipong} % TODO: Better title?

In this section we will describe how we developed the Multipong application,
focusing on some architectural and implementation choices we made to improve
the game quality.

\subsection{Game description} % TODO: Better title?

Multipong is a tribute to the Pong game, one of the first arcade videogames.
Instead of playing against an AI, there are a single-player mode and a
multiplayer mode.

In the single-player mode the player scores a point each time the paddle hits
the ball, making it bounce upwards until it reaches the top edge and then the
ball falls down again. Clearly, the player loses the game when the paddle misses
the ball.

In the multiplayer mode, several human players connect their devices in order
to form an ad hoc network and then when one of the players hits the ball, it is
transferred to the next player's screen as if their gameboards were joint.
When a player misses the ball, he loses a life and the ball is thrown out
randomly to the next player's screen.
If a player runs out of lives, she will not be able to play for the rest of the
game.

Before starting a multiplayer game a player (called the \textit{host}) creates
a match, allowing other players in his same network to join. Then, when the
game starts, the host will be the initial player.

Since the single-player mode does not involve any significant discussion about
networking and that we did not put any special effort into making the game save
more battery power by optimizing the ui rendering (e.g. we could have improved
the ui rendering performance by using OpenGL), here below we will focus on
discussing the two phases of the multiplayer mode, namely the game formation
and the gameplay.

\subsection{Game formation}

Hereafter we will assume that the players configured correctly a Wi-Fi Direct
ad hoc network with their Android devices, i.e. that they can communicate with
each other within this network.

Since in this phase there are not strong requirements to meet in terms of
real-time information delivering, we decided to use TCP connections until the
game starts. Also, this choice will provide us an element of comparison to the
solution we adopted for gameplay.

% TODO: cope with special p2p topology
% TODO: talk about data sent among peers
% TODO: talk about the asynchronous model employed for communication among peers
% TODO: describe the protocol of game formation
% TODO: describe the start of a game

